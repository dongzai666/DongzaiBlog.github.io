<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>git_operate | 小东仔的个人博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
    <meta name="description" content="小东仔的个人博客">
  
  
  
    <link rel="alternate" href="/atom.xml" title="小东仔的个人博客" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
    
<link rel="stylesheet" href="/localshare/css/share.css">

  
  
<meta name="generator" content="Hexo 6.0.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">小东仔的个人博客</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        
          <a class="main-nav-link" href="/."><i class="fa fa-home"></i> Home</a>
        
          <a class="main-nav-link" href="/archives/"><i class="fa fa-archive"></i> Archive</a>
        
          <a class="main-nav-link" href="/about/"><i class="fa fa-user"></i> About</a>
        
          <a class="main-nav-link" href="/atom.xml"><i class="fa fa-rss"></i> RSS</a>
        
      </nav>
    </div>
    <div id="search-form">
      <div id="result-mask" class="hide"></div>
      <label><input id="search-key" type="text" autocomplete="off" placeholder="search"></label>
      <div id="result-wrap" class="hide">
        <div id="search-result"></div>
      </div>
      <div class="hide">
        <template id="search-tpl">
          <div class="item">
            <a href="/{path}" title="{title}">
              <div class="title">{title}</div>
              <div class="time">{date}</div>
              <div class="tags">{tags}</div>
            </a>
          </div>
        </template>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-git-operate" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      git_operate
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2022-02-21T04:42:15.000Z" itemprop="datePublished">2022年02月21日</time>
</span>
      
      
        <span class="article-views">
  <i class="fa fa-views"></i>
  <i id="busuanzi_container_page_pv">
      <i id="busuanzi_value_page_pv"></i>
  </i>
</span>

      
      
<a href="/2022/02/21/git-operate/#comments" class="article-comment-link">
  
    
    
    
    
    
  
  <i class="fa fa-commt"></i>
  Guestbook
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="Git基础操作指南"><a href="#Git基础操作指南" class="headerlink" title="Git基础操作指南"></a>Git基础操作指南</h1><blockquote>
<p>本教程是记录自己对git基础操作的一些理解</p>
</blockquote>
<blockquote>
<p>简介：Git是一款免费、开源的分布式版本控制系统，而github是一个远端仓库，通过git可以对github仓库进行管理，同时方便进行团队合作，共同开发项目</p>
</blockquote>
<span id="more"></span>
<ul>
<li><p>git status 查询当前文件夹git仓库状态，该命令比较常用，例如可以查看当前文件夹是否初始化 以及 提交历史信息</p>
</li>
<li><p>git init 初始化仓库，会在本地文件夹下生成一个 .git 文件</p>
</li>
<li><p>git add 将文件加入到<strong>本地暂存区</strong>，保存本地修改</p>
</li>
<li><p><code>git commit -m 提交描述信息</code> 将本地暂存区中的所有文件 上传到与本地绑定的远端仓库中</p>
</li>
<li><p>git log 查询所有的commit信息</p>
</li>
<li><p>新建分支：</p>
<ul>
<li>git branch 分支名 创建一个‘分支名`的分支</li>
<li>git branch 可以查询当前所有分支</li>
</ul>
</li>
<li><p>git checkout 分支  我们的所有操作都是基于分支的，在不同分支间进行切换需要用到此命令</p>
</li>
<li><p>git branch -b 分支  在创建新分支的同时切换到该分支，一次到位</p>
</li>
<li><p>删除分支：</p>
<ul>
<li>git branch -d 分支  当某一分支创建错误，或者该分支所有代码已经合并到master分支，此时该分支已失去价值，可通过此命令删除</li>
<li>git branch -D 分支  该命令是强制删除指定分支，场景为：需要删除某一分支，但此时该分支并未合并入主分支，执行上一命令会提示还有分支未合并，可用该命令强制删除</li>
</ul>
</li>
<li><p>打标签：对于程序开发中会有 v.1 v.n 的区别，此时可以给对应的提交代码打标签</p>
<ul>
<li>git tag 标签名</li>
<li>git tag  则可以查询历史tag记录<blockquote>
<p>同理，在打完标签以后，可以通过标签回退程序 如：git checkout 标签</p>
</blockquote>
</li>
</ul>
</li>
</ul>
<hr>
<h2 id="github远端相关操作"><a href="#github远端相关操作" class="headerlink" title="github远端相关操作"></a>github远端相关操作</h2><blockquote>
<p>在电脑本地配置好Git环境后，我们就可以从远端仓库pull代码了，但是还不能向远端仓库push代码，因为我们需要将本机电脑同远端仓库建立联系，这时需要用到SSH：</p>
</blockquote>
<blockquote>
<p>那么什么是 SSH 呢？ 简单点说，SSH是一种网络协议，用于计算机之间的加密登录。目前是每一台 Linux 电脑的标准配置。而大多数 Git 服务器都会选择使用 SSH 公钥来进行授权，所以想要在 GitHub 提交代码的第一步就是要先添加 SSH key 配置。</p>
</blockquote>
<ul>
<li><p>通过SSH与远端仓库建立联系：Linux 与 Mac 都是默认安装了 SSH ，而 Windows 系统安装了 Git Bash 应该也是带了 SSH的。 在终端输入 <code> ssh-keygen -t rsa</code>  </p>
<ul>
<li>就是指定 rsa 算法生成密钥，接着连续三个回车键（不需要输入密码），然后就会生成两个文件 id_rsa 和 id_rsa.pub ，而 id_rsa 是密钥，id_rsa.pub 就是公钥。这两文件默认分别在如下目录里生成：向GitHub 提交代码</li>
<li>Linux/Mac 系统 在 ~/.ssh 下，win系统在 /c/Documents and Settings/username/.ssh 下，都是隐藏文件。</li>
<li>把 id_rsa.pub 的内容添加到 GitHub 上，这样你本地的 id_rsa 密钥跟 GitHub上的 id_rsa.pub 公钥进行配对，授权成功才可以提交代码</li>
</ul>
</li>
<li><p>pull/push 代码：</p>
<ul>
<li>‘git pull 远程主机名称 远程分支名称：本地分支名称`  从远端仓库拉下来到本地分支</li>
<li><code>git push 远程主机名称 本地分支名称：远程分支名称</code>  将本地分支代码推到远程分支上去<blockquote>
<p>一般来说我们远程分支名称与本地分支名称保持一致，便捷些</p>
</blockquote>
</li>
<li><strong>一般为了防止产生冲突，我们强调先pull再push</strong></li>
<li>删除远程某分支：<code>git push 远程主机名  ：远程分支</code> 原理是向远端分支提交一个空的分支覆盖掉，就相当于删除了该远端分支</li>
</ul>
</li>
<li><p>上面提到的远程主机名，即我们对远程仓库的命名，如果不指定则默认 <strong>origin</strong> ,可以通过以下三种方式修改远程主机名：</p>
<ol>
<li>克隆仓库时：<code>git clone -o 远程主机名 仓库网址 指定本地生成文件夹名称</code><blockquote>
<p>克隆仓库会在本地生成指定名称的文件夹，该文件夹已经初始化完毕</p>
</blockquote>
</li>
<li>给已经初始化(git init)后的文件夹添加远程仓库： <code>git remote add 远程主机名 仓库网址</code></li>
<li>直接更名：<code>git remote rename 原主机名 新主机名</code> <blockquote>
<p>git remote 系列命令是对远程主机进行的操作，下面会有详细讲解</p>
</blockquote>
</li>
</ol>
</li>
<li><p>远程仓库网址命名规则：</p>
<ul>
<li>https: <code>https://github.com/用户名/项目名.git</code></li>
<li>ssh: <code>git@github.com:用户名/项目名.git</code> <blockquote>
<p>.git 可以省略</p>
</blockquote>
</li>
</ul>
</li>
<li><p>git信息的全局配置 ：<code>git config --glob xxx</code></p>
<ul>
<li>git config —global user.name “stormzhang”</li>
<li>git config —global user.email “<a href="mailto:&#115;&#116;&#x6f;&#114;&#109;&#122;&#104;&#x61;&#110;&#x67;&#x2e;&#x64;&#x65;&#118;&#64;&#x67;&#x6d;&#x61;&#105;&#x6c;&#x2e;&#x63;&#x6f;&#x6d;">&#115;&#116;&#x6f;&#114;&#109;&#122;&#104;&#x61;&#110;&#x67;&#x2e;&#x64;&#x65;&#118;&#64;&#x67;&#x6d;&#x61;&#105;&#x6c;&#x2e;&#x63;&#x6f;&#x6d;</a>“</li>
<li><strong>简化命令</strong>：<code>git config --glob alias.别名 原来命令</code><ul>
<li>例:git config –global alias.co checkout # 别名<blockquote>
<p>一个比较屌的命令，用于美化日志查询 <code>git config --global alias.lg &quot;log --graph --pretty=format:&#39;%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)&lt;%an&gt;%Creset&#39; --abbrev-commit --date=relative&quot;</code></p>
</blockquote>
</li>
</ul>
</li>
</ul>
</li>
<li><p>为了便于管理，Git要求每个远程主机都必须指定一个主机名，git remote 系列命令就用于对远程主机进行操作：</p>
<ul>
<li><code>git remote</code> 用于查看与该文件夹关联的所有远程主机名</li>
<li><code>git remote</code> 同时查看主机名及网址</li>
<li><code>git remote show 主机名</code> 列出所有关联主机的详细信息</li>
<li><code>git remote rm 主机名</code> 用于删除远程主机</li>
<li>还有上面提到的若干</li>
</ul>
</li>
<li><p>查看文件改动：<code>git diff</code> 直接输入 git diff 只能比较当前文件和暂存区文件差异</p>
<ul>
<li>git diff &lt;$id1&gt; &lt;$id2&gt; # 比较两次提交之间的差异</li>
<li>git diff <branch1>..<branch2> # 在两个分支之间比较</li>
<li>git diff –staged # 比较暂存区和版本库差异</li>
</ul>
</li>
<li><p>stash 中文释义：暂存区</p>
<blockquote>
<p>对于这个命令向来大家是比较模糊的，不太清楚它的使用场景<br>设想一个场景，假设我们正在一个新的分支做新的功能，这个时候突然有一个紧急的bug需要<br>修复，而且修复完之后需要立即发布。当然你说我先把刚写的一点代码进行提交不就行了<br>么？这样理论上当然是ok的，但是这会产品垃圾commit，原则上我们每次的commit都要有实<br>际的意义，你的代码只是刚写了一半，还没有什么实际的意义是不建议就这样commit的，那<br>么有没有一种比较好的办法，可以让我暂时切到别的分支，修复完bug再切回来，而且代码也<br>能保留的呢？<br>这个时候 stash 命令就大有用处了，前提是我们的代码没有进行 commit ，哪怕你执行了add 也没关系</p>
</blockquote>
<ul>
<li>执行： <code>git stash</code> 这样就会将暂时没有commit 的代码暂存起来，这时我们进行分支切换也就没有任何问题了</li>
<li><code>git stash list</code>  查看暂存记录<blockquote>
<p>当你把所有bug解决后就可以通过如下命令恢复，然后切换灰来继续做之前没做完的功能</p>
</blockquote>
</li>
<li><code>git stash apply</code> 将暂存区还原</li>
<li><code>git stash drop stash_id(可选，删除指定记录)</code> 将之前最近的一次暂存记录删除，</li>
<li><code>git stash pop</code> 还原暂存区＋删除最近一次暂存记录</li>
<li><code>git stash clear</code> 清空所有暂存区的记录</li>
</ul>
</li>
<li><p>merge &amp; rebase</p>
<blockquote>
<p>我们知道 merge 分支是合并的意思，我们在一个 featureA 分支开发完了一个功能，这个时候<br>需要合并到主分支 master 上去，我们只需要进行如下操作：</p>
</blockquote>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git checkout master</span><br><span class="line">git merge/rebase featureA</span><br></pre></td></tr></table></figure>




<p>rebase 和 merge 的区别</p>
<ul>
<li>rebase 跟 merge 的区别你们可以理解成有两个书架，你需要把两个书架的书整理到一起<br>去，第一种做法是 merge ，比较粗鲁暴力，就直接腾出一块地方把另一个书架的书全部放进<br>去，虽然暴力，但是这种做法你可以知道哪些书是来自另一个书架的；第二种做法就是<br>rebase ，他会把两个书架的书先进行比较，按照购书的时间来给他重新排序，然后重新放置<br>好，这样做的好处就是合并之后的书架看起来很有逻辑，但是你很难清晰的知道哪些书来自<br>哪个书架的。</li>
</ul>
<blockquote>
<p>也就是 经<strong>merge</strong>合并后的分支记录并不是只有主干一条，像小河流汇入大河一样，主干分支清晰可见，而经<strong>rebase</strong> 合并后的分支记录只有主干一条，分支是不可见的，所有分支按时间顺序汇入主干中。   </p>
</blockquote>
<ul>
<li><p>总结：merge 来路可循但时间节点较乱，rebase时间节点清晰但来路不明</p>
</li>
<li><p>解决冲突：有conflit的时候git会智能提示，冲突的地方由 ==== 分出了上下两个部分，上部分一个叫HEAD 的字样代表是我当前所在分支的代码，下半部分是一个叫 baidu_activity 分支的代码，可以看到 HEAD 对 gradle 插件进行了升级，同时新增了一个插件，所以我们很容易判断哪些代码该保留，哪些代码该删除，我们只需要移除掉那些老旧代码，而且同时也要把那些&lt;&lt;&lt; HEAD、==== 以及 &gt;&gt;&gt;&gt;&gt;&gt;baidu_activity 这些标记符号也一并删除，最后进行一次<br>commit 就ok了。</p>
</li>
</ul>

        
            <div id="toc-article">
                
  <div class="widget-wrap" id="toc-wrap">
    <h3 class="widget-title"><i class="fa fa-toc"></i> Contents</h3>
    <div class="widget">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Git%E5%9F%BA%E7%A1%80%E6%93%8D%E4%BD%9C%E6%8C%87%E5%8D%97"><span class="toc-text">Git基础操作指南</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#github%E8%BF%9C%E7%AB%AF%E7%9B%B8%E5%85%B3%E6%93%8D%E4%BD%9C"><span class="toc-text">github远端相关操作</span></a></li></ol></li></ol>
    </div>
  </div>


            </div>
        
        
          <blockquote id="copyright">
              <p>Original link: <a href="http://example.com/2022/02/21/git-operate/">http://example.com/2022/02/21/git-operate/</a></p>
              <p>Copyright Notice: 转载请注明出处.</p>
          </blockquote>
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%BC%96%E7%A0%81%E5%B7%A5%E5%85%B7/" rel="tag">编码工具</a></li></ul>

          
    <div class="social-share">
      <span>Share:</span>
    </div>



        </div>
      
      
        
<nav id="article-nav">
  
  
    <a href="/2022/02/12/vim-operate/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">older</strong>
      <div class="article-nav-title">vim_operate</div>
    </a>
  
</nav>

      
      
        







      
    </footer>
  </div>
</article>
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title"><i class="fa fa-posts"></i> Recent</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2022/02/21/git-operate/">git_operate</a>
          </li>
        
          <li>
            <a href="/2022/02/12/vim-operate/">vim_operate</a>
          </li>
        
          <li>
            <a href="/2022/01/30/hexoblog/">github+hexo 个人博客搭建</a>
          </li>
        
      </ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title"><i class="fa fa-tag"></i> Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E3%80%81%E7%BB%8F%E9%AA%8C/" style="font-size: 10px;">环境搭建、经验</a> <a href="/tags/%E7%BC%96%E7%A0%81%E5%B7%A5%E5%85%B7/" style="font-size: 20px;">编码工具</a>
    </div>
  </div>

  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title"><i class="fa fa-archive"></i> Archive</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/">2022年02月</a><span class="archive-list-count">3</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title"><i class="fa fa-tag"></i> Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E3%80%81%E7%BB%8F%E9%AA%8C/" rel="tag">环境搭建、经验</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BC%96%E7%A0%81%E5%B7%A5%E5%85%B7/" rel="tag">编码工具</a><span class="tag-list-count">2</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title"><i class="fa fa-link"></i> Blogroll</h3>
    <div class="widget">
      <ul>
      
        <li>
          <a target="_blank" rel="noopener" href="http://bit.baidu.com/index">百度技术培训中心</a>
        </li>
      
      </ul>
    </div>
  </div>


  
</aside>
        
      </div>
      <a id="totop" href="#top"></a>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      <p>
        <a href="/sitemap.xml">Site Map</a>
        <span> | </span><a href="/atom.xml">Subscribe to this site</a>
        <span> | </span><a href="/about/">Contact the blogger</a>
      </p>
      
        <p>
          <i class="fa fa-visitors"></i>
          <i id="busuanzi_container_site_uv"><i id="busuanzi_value_site_uv"></i></i>
          ，
          <i class="fa fa-views"></i>
          <i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i>
        </p>
      
      <p>
        <span>Copyright &copy; 2022 dongzai.</span>
        <span>Theme by <a href="https://github.com/chaooo/hexo-theme-BlueLake/" target="_blank">BlueLake.</a></span>
        
            <span>Count by <a href="http://busuanzi.ibruce.info/" target="_blank">busuanzi.</a></span>
        
        <span>Powered by <a href="https://hexo.io/" target="_blank">Hexo.</a></span>
      </p>
    </div>
  </div>
</footer>

    </div>
    
<script src="/js/jquery-3.4.1.min.js"></script>


<script src="/js/search.json.js"></script>


  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>






  
<script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>



  
<script src="/localshare/js/social-share.js"></script>

  
<script src="/localshare/js/qrcode.js"></script>




















  </div>
</body>
</html>